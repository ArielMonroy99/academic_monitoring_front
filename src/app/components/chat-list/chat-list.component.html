<h3 class="font-semibold text-lg ml-1">Chats</h3>
<input placeholder="Busca un chat" [(ngModel)]="search" (ngModelChange)="onSearchInputChangeHandler()"
class="w-full border rounded-md focus:outline-1 focus:outline-active outline-active px-2">
<ul class="py-2 space-y-2  w-full">
  @for (message of lastMessageList; track message.id) {
    <li
      tabindex="0"
      (click)="onReceiverSelected(message.userId)"
      (keydown)="onReceiverKeyDown($event, message.userId)"
      class="border rounded cursor-pointer flex p-2 w-full max-h-24 max-w-64 lg:max-h-fit lg:max-w-full bg-white"
    >
      <div class="flex flex-row w-full">
        <div class="mr-2">
          @if (null !== message.uuid) {
            <img
              [src]="API_URL + '/file/image/' + message.uuid"
              class="rounded-full size-10"
              alt=""
            />
          } @else {
            <img
              src="./assets/user.svg"
              class="size-10 min-h-10 min-w-10"
              alt=""
            />
          }
        </div>
        <div class="flex w-full justify-between">
          <div class="w-fit max-w-[10rem] lg:max-w-[18rem]">
            <p class="font-bold text-amber-600 truncate w-full">
              {{ message.name }} {{ message.lastname }}
            </p>
            @if (message.sender === userData.user.username) {
              <p class="text-gray-500 truncate w-full">
                Tú: {{ message.content }}
              </p>
            } @else {
              <p class="text-gray-500 truncate w-full">
                {{ message.content }}
              </p>
            }
          </div>
          <div class="flex flex-col">
            <span class="text-xs">{{ message.date | date: "HH:mm" }}</span>
            @if (!message.isSeen && message.sender !== userData.user.username) {
              <span class="size-5 p-[.5px] bg-green-700 rounded-full">❗</span>
            }
          </div>
        </div>
      </div>
    </li>
  }
</ul>
